<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Drone Weather Report</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background-color: #2196F3;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .summary {
            background-color: #E8F5E8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
        }

        .weather {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .tfr {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .good {
            color: #4CAF50;
            font-weight: bold;
        }

        .warning {
            color: #FF9800;
            font-weight: bold;
        }

        .metric {
            display: inline-block;
            margin: 10px 15px 10px 0;
        }

        .metric-label {
            font-weight: bold;
            color: #666;
        }

        .metric-value {
            font-size: 18px;
            color: #2196F3;
        }

        .footer {
            text-align: center;
            color: #666;
            font-size: 12px;
            margin-top: 30px;
            border-top: 1px solid #ddd;
            padding-top: 15px;
        }

        .wind-dir {
            font-size: 14px;
            color: #666;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>Drone Weather Report</h1>
        <h2>{{.LocationName}}</h2>
        <p>{{.Date.Format "Monday, January 2, 2006 at 3:04 PM MST"}}</p>
    </div>

    <div class="summary">
        <h2>{{.Summary}}</h2>
        <p><strong>Weather:</strong> {{if .WeatherAnalysis.IsFlyable}}<span class="good">Suitable</span>{{else}}<span
                class="warning">Not suitable</span>{{end}} for flying</p>
        <p><strong>TFRs:</strong> {{.TFRCheck.Summary}}</p>
    </div>

    <div class="weather">
        <h3>Weather Conditions</h3>
        <div class="metric">
            <div class="metric-label">Temperature</div>
            <div class="metric-value">{{printf "%.1f C (%.0f F)" .WeatherAnalysis.Data.Temperature
                .WeatherAnalysis.TempF}}</div>
        </div>
        <div class="metric">
            <div class="metric-label">Wind Speed</div>
            <div class="metric-value">{{printf "%.0f mph" .WeatherAnalysis.WindSpeedMph}}</div>
        </div>
        <div class="metric">
            <div class="metric-label">Visibility</div>
            <div class="metric-value">{{printf "%.1f mi" .WeatherAnalysis.VisibilityMi}}</div>
        </div>
        <div class="metric">
            <div class="metric-label">Precipitation</div>
            <div class="metric-value">{{printf "%.1f mm" .WeatherAnalysis.Data.Precipitation}}</div>
        </div>

        <p><strong>Wind Forecast:</strong> {{.WeatherAnalysis.WindForecast}}</p>
        <p><strong>Best Flying Window:</strong> {{.WeatherAnalysis.BestWindow}}</p>
        <p class="wind-dir"><strong>Wind Direction:</strong> {{.WeatherAnalysis.Data.WindDir}} degrees</p>
    </div>

    <div class="tfr">
        <h3>Airspace Information</h3>
        <p><strong>TFR Check:</strong> {{.TFRCheck.Summary}}</p>
        <p><strong>Search Radius:</strong> {{.TFRCheck.CheckRadius}} miles</p>
        {{if .TFRCheck.HasActiveTFRs}}
        <div class="warning">
            <p><strong>Active Restrictions in Area:</strong></p>
            <ul>
                {{range .TFRCheck.ActiveTFRs}}
                <li><strong>{{.Name}}</strong> ({{.Type}}): {{.Reason}}</li>
                {{end}}
            </ul>
            <p style="margin-top: 10px;"><em>Note: You may still fly outside the restricted areas. Always check NOTAMs
                    and exact TFR boundaries before flying.</em></p>
        </div>
        {{else}}
        <p class="good">No active flight restrictions in the search area</p>
        {{end}}
    </div>

    <div class="footer">
        <p><strong>Happy flying!</strong></p>
        <p>Generated by Drone Weather Agent - Weather data from Open-Meteo</p>
        <p style="font-style: italic; color: #888; margin: 15px 0;">"Safety first - always check NOTAMs and local
            regulations before flying"</p>
        <hr style="border: none; border-top: 1px solid #ddd; margin: 20px 0;">
        <p>Made with love by <a href="https://eliottteissonniere.com"
                style="color: #2196F3; text-decoration: none;">Eliott Teissonniere</a></p>
        <p><a href="https://github.com/ETeissonniere/agent-stack" style="color: #2196F3; text-decoration: none;">Star
                us on GitHub</a></p>
    </div>
</body>

</html>